# 마일 스톤

구현 일정 (07.27 ~ 08.22)

#### 앱의 전체 기능 구현

| 구분                         | 진행업무                                                     | 상세업무                                                     |
| ---------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 로그인                       | 로그인 전 사용자 환경 점검을 한다.                           | 로그인 버튼을 누르면 사용자에게 권한요청을 한 후 로그인 환경 확인(인터넷 등) |
|                              | 구글 계정 로그인을 진행한다                                  | 파이어베이스 프로젝트를 생성하여 Authentication 관련 json파일과 dependencies 환경 세팅을 진행한다. |
|                              |                                                              | 파이어베이스의 구글 로그인(GSC, GSO)를 구현하여 구글 로그인을 진행한다. |
|                              | 로그인 성공여부에 따른 화면이 나타난다.                      | 사용자의 로그인 상태별(로그인전, 진행중, 성공, 실패)로 나타낼 UI와 로직을 구현한다. |
|                              |                                                              |                                                              |
| 캘린더 연동 및 일정 가져오기 | API사용 전 환경을 세팅한다.                                  | API 사용을 위한 서비스 객체와 Credential 객체를 싱글톤으로 생성한다. |
|                              | 로그인한 계정의 캘린더와 일정들을 서버로부터 가져온다.       | API 서버로 부터 데이터들을 가져오는데에 필요한 함수 및 클래스들을 작성한다.<br />(get, response 함수, Entity, Repository 등) |
|                              |                                                              | 로그인 된 계정의 캘린더 리스트 들을 API서버로부터 가져온다   |
|                              | 가져온 데이터들을 로컬DB에 저장한다.                         | 가져온 데이터들을 로컬DB에 저장하는데에 필요한 함수 및 클래스들을 작성한다.(insert, dao, entity, database, Repository 등) |
|                              |                                                              | 위에서 작성한 로직을 이용해 가공한 API 데이터를 로컬DB에 저장한다. |
|                              |                                                              | (추후에 필요하다면 캘린더 리스트 선택/해제 기능을 통해       |
|                              |                                                              | 원하는 캘린더의 일정만 보이도록 함)                          |
|                              | 로컬DB에 저장된 데이터를 불러오는 로직을 작성한다.           | 이벤트(일정)을 로컬DB에 저장하고 불러오는 DB관련 로직  함수(get)들을 작성하여  ViewModel등에서 함수 호출만으로 데이터를 조작할 수 있도록 한다. |
|                              |                                                              |                                                              |
| 캘린더 스케줄 동기화 하기    | 로그인 상태에서도 동기화 버튼을 눌러 언제든지 일정 동기화를 할 수 있다. | 동기화 버튼을 누르면 현재 구글 계정의 캘린더 일정 데이터를 가져온다. |
|                              |                                                              | 가져온 데이터의 최근 업데이트 시간과 로컬DB에 저장된 일정들의 etag or 업데이트 시간을 비교하여 시간이 다른 일정들을 로컬DB에 업데이트 하여 저장한다 |
|                              |                                                              |                                                              |
| 캘린더뷰 최상단바 구성       | 네비게이션 바 버튼을 누르면 내 연동정보를 펼쳐 보여준다      | 연동된 내 구글계정의 캘린더 리스트들을 네비게이션 바에서 보여준다 |
|                              |                                                              | 네비게이션 UI와 네비게이션을 나타내는데에 필요 함수들을 작성한다. |
|                              |                                                              | 네비게이션에서 보여주는 캘린더 리스트 중 선택한 캘린더의 스케줄만 캘린더 뷰에 표시된다. |
|                              | 월 선택 옵션을 눌러 원하는 달의 달력과 스케줄을 보여준다     | 월 옵션 메뉴를 눌러 캘린더 다이얼로그를  띄운다.     (다이얼로그 내의 캘린더는 기본 내장 캘린더 뷰 사용) |
|                              |                                                              | 내가 원하는 월을 선택한 후 완료 버튼을 누르면       메인 캘린더뷰가 선택한 월로 이동하여 해당 월의 스케줄을 보여준다 |
|                              |                                                              |                                                              |
| 캘린더 메인화면 구성         | 메인 화면 달력의 초기 상태는 현재 달의 달력과 스케줄을 보여준다. | 캘린더 메인뷰에 진입하면  접속시간을 기준으로의  현재 달과 그에 맞는 스케줄을 캘린더 뷰에 보여준다. |
|                              | 메인 화면 달력은 위 아래로 스와이프 하여 날짜를 이동할 수 있다. | 메인 캘린더뷰는 커스텀뷰로  직접 그린 리사이클러뷰로 제작한다 |
|                              |                                                              | 리사이클러 뷰를 위 아래로 스크롤하면 자유롭게 날짜 이동이  가능하다 |
|                              | 스케줄은 띠(태그) 형식으로 달력의 해당날짜에 표시된다        | 스케줄은 스티커(띠)처럼 달력의 해당 날짜에 표시되며          |
|                              |                                                              | 며칠 연속된 스케줄이라면 띠를 연장하여 하나처럼 보여준다     |
|                              | 달력에서 날짜 클릭 시 해당 날짜가 포함된 주(Week)의 높이를 확대한다 | 메인 캘린더뷰의 날짜를  클릭하면 해당 날짜가 포함된 주의 높이를 펼치듯이 확대하며     초기에는 현재 날짜의 주가 확대되어 있다 |
|                              | 확대된 주의 날짜를 클릭하면  해당 날짜의 스케줄 리스트를 보여주는     프레그먼트로 이동한다 | 메인 캘린더뷰에서 높이가 확대된 주 의 날짜를 클릭하면  해당 날짜의 스케줄 리스트를     보여주는 새로운 프레그먼트로 진입한다 |
|                              | 이동한 프레그먼트에서 그 날의 스케줄들을 시간순으로 리스트처럼 보여준다 | 이동한 프레그먼트에서 해당 날짜의 스케줄들을 시간순으로  정렬하여     위에서 부터 아래로 하나씩 차례대로 보여준다 |
|                              | 스케줄 중 하나를 선택하면 그 스케줄을 선택할 수 있는 프레그먼트로 이동한다 | 보여지는 스케줄 중 하나를 선택하면 그 스케줄을 수정 할  수 있는 프레그먼트로 이동한다 |
|                              |                                                              | (이 프레그먼트에서 일정의 제목이나 날짜등을 변경할 수  있도록 한다)=> 후 우선순위 |
|                              |                                                              |                                                              |

</br>

#### 아키텍처 구현

| 구분               | 진행업무                                                     | 상세업무                                                     |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **MVVM** 패턴 적용 | 구글 로그인 구현까지의 코드를 MVVM 패턴을 적용해 리팩토링 한다. | 하나의 액티비티(MainActivity)에 작성된 구글  **로그인 관련 코드**를 View와 ViewModel, Model로 분리하여 작성함으로써 MVVM패턴 구조를 잡아 나간다. |
|                    | 로그인된 계정의 캘린더 리스트들을 불러오는 부분까지에 대해       MVVM 패턴을 적용하여 리팩토링을 한다 | 하나의 액티비티(MainActivity)에 작성된 **캘린더  리스트 불러오기 관련 코드**를 View와 ViewModel, Model로 분리하여 작성함으로써 MVVM패턴 구조를 잡아 나간다. |
|                    | 캘린더 리스트 중 선택한 캘린더에 대한 모든 일정들을  불러오는 부분까지 MVVM패턴을 적용하여 리팩토링을 한다 | 하나의 액티비티(MainActivity)에 작성된  **스케줄(일정) 불러오기 관련 코드**를 View와 ViewModel, Model로 분리하여 작성함으로써 MVVM패턴 구조를 잡아 나간다. |
|                    | 스케줄(일정이벤트)을 TextView에 뿌려주는 부분에  대한 코드를 MVVM패턴을     적용하여 리팩토링 한다. | 하나의 액티비티(MainActivity)에 작성된  **스케줄(일정)을 TextView에 나타내는 부분**에 대한 코드를 View와 ViewModel, Model로 분리하여 작성함으로써 MVVM패턴  구조를 잡아 나간다. |
|                    | TextView에 뿌려줬던 스케줄을 캘린더 CustomView에 정리하여 보여준다. | Calendar CustomView가 완성이 되면 뷰에 스케줄을 보여줄 수 있다. 이 때, MVVM 패턴을 기반으로 CustomView를 리팩토링 한다. |
|                    |                                                              |                                                              |
| **Dagger** 적용    | **CustomView를 구현하기 이전**까지의 부분 <br />(구글 로그인, 캘린더 리스트 가져와서 LocalDB에 저장하기, 스케줄 리스트 가져와서 LocalDB에 저장하기 등)에 Dagger를 적용하여 리팩토링 한다. | 구글 로그인을 하는데에 필요한 의존성들을 파악하여 앞서 구현한 MVVM 코드를 바탕으로 Dagger를 적용하여 리팩토링을 진행한다. |
|                    |                                                              | Google Calendar API로 부터 캘린더 데이터들을 가져오는데 필요한 의존성들을 파악하여 앞서 구현한 MVVM 코드를 바탕으로 Dagger를 적용하여 리팩토링을 진행한다. |
|                    |                                                              | 가져온 Google Calendar API를 LocalDB에 저장하는데에 필요한 의존성들을 파악하여 앞서 구현한 MVVM코드를 바탕으로 Dagger를 적용하여 코드 리팩토링을 진행한다. |
|                    | CustomView를 구현하고 나서 Dagger를 적용하여 리팩토링 한다.  | LocalDB에 저장된 데이터들을 Calendar CustomView에 나타내는데에 필요한 의존성들을 파악하여 앞서 구현한 MVVM 코드를 바탕으로 Dagger를 적용하여 코드 리팩토링을 진행한다. |
|                    |                                                              |                                                              |

</br>

#### LocalDB 구현

| 구분               | 진행업무                                                     | 상세업무                                                     |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| CalendarList       | CalendarList는 한 구글 계정에 등록된 캘린더들의 목록을 가져오는 API로, 가져온 캘린더들을 LocalDB에 리스트로 저장하고 불러올 수 있도록 한다. | CalendarList를 LocalDB에 저장하기 위해 필요한 Response와 get 함수 toEntity함수 등을 구현한다. |
| CalendarListEntity | CalendarListEntity는 CalendarList의 하나의 요소로 존재하는 항목으로, 하나의 캘린더에 대한 메타데이터와 user-specific한 properties가 존재한다. 이를 로컬DB에 저장하고 불러올 수 있도록 한다. | CalendarList의 요소인 CalendarListEntity 클래스를 구현한다. calendarList<CalendarListEntity> 와 같은 형식으로 구현할 수 있도록 한다. |
| CalendarsEntity    | 하나의 캘린더에 대한 메타데이터가 존재하는 Entity이다.</br>CalendarListEntity와는 달리 메타데이터만을 가지고 있다. 이를 로컬DB에 저장하고 불러올 수 있도록 한다. | 특정 캘린더의 메타데이터를 갖고있는 Entity이다. Calendars의 API를 참고하여 Entity를 구현할 수 있도록 한다. |
| EventsList         | EventsList는 하나의 캘린더가 갖고 있는 모든 이벤트(스케줄)를 가져오는 API로, 가져온 이벤트들을 LocalDB에 리스트로 저장하고 불러올 수 있도록 한다. | EventsList를 LocalDB에 저장하기 위해 필요한 Response와 get 함수 toEntity함수 등을 구현한다. |
| EventsListEntity   | EventListEntity는 EventList의 하나의 요소로써, 하나의 이벤트에 대한 구체적인 정보들이 담겨있다. 이를 로컬DB에 저장하고 불러올 수 있도록 한다. | EventLists의 요소인 EventsListEntity 클래스를 구현한다.<br />eventsList<EventsListEntity>와 같은 형식으로 구현할 수 있도록 한다. |
|                    |                                                              | 구글캘린더 API에서 제공하는 EventsListEntity의 Response항목들이 많기 때문에 잘 선별하여 사용할 것과 사용하지 않을 것을 구분하여 구현할 수 있도록 한다. |
| ColorsEntity       | Colors는 Calendar와 Event UI에 사용되는 background와 foreground Color를 모아놓은 API이다. API를 통해 받아온 색들을 로컬DB에 저장하였다가 특정 색을 이용하여 UI를 나타낼 때 참고하여 나타낼 수 있도록 한다. Background에 사용되는 컬러값과 Foreground에 사용되는 컬러값이 나뉘어져 있다. | Calendar와 Event를 생성할 때, 기본적으로 생성되는 색상이 있지만 특정 색상을 이용하여 이벤트나 캘린더를 생성하고 싶으면 이 ColorDB에 존재하는 색상을 참고하여 만들수 있도록 한다. ( 추가 사항. ) |
|                    |                                                              |                                                              |
|                    |                                                              |                                                              |

